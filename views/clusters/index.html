{% set menufocus = "clusters" %}
{% set title = "Clusters" %}

{% extends "layout.html" %}

{% if (countLimit is none) or (countLimit is not number) %}
    {% set countLimit = 10 %}
{% endif %}

{% block css %}
<link rel="stylesheet" href="/assets/components/bootstrap/css/bootstrap-select-1.9.4.min.css" type="text/css" />
<link rel="stylesheet" href="/assets/components/bootstrap/css/dataTables.bootstrap-1.10.10.min.css" type="text/css" />
<link rel="stylesheet" href="/assets/css/machines/styles.css" type="text/css" />
{% endblock %}

{% block javascript %}

<script>
var WSHOSTNAME = "{{ wshostname }}";
var WSPORT = "{{ wsport }}";
var EMAIL = "{{ email }}";
var CLOUDPLATFORM = "{{ cloudPlatform }}";

if (CLOUDPLATFORM == "openstack"){
    $(function() {
        drawClusterTable();
        addClusterTemplates();
    })
} 

</script>
<!-- Other -->
<script src="/assets/components/bootstrap/js/bootstrap-select-1.9.4.min.js"></script>
<script src="/assets/components/jquery/jquery.knob-1.2.11.min.js"></script>
<script src="/assets/components/jquery/moment.js"></script>
<!-- DataTables -->
<script src="/assets/components/jquery/jquery.dataTables-1.10.10.min.js"></script>
<script src="/assets/components/bootstrap/js/dataTables.bootstrap-1.10.10.min.js"></script>

{% if cloudPlatform == "openstack" %}
    <!-- Clusters -->
    <script src="/assets/js/clusters/get-clusters.js"></script>
    <script src="/assets/js/clusters/create-cluster.js"></script>
    <script src="/assets/js/clusters/get-cluster-templates.js"></script>
{% endif %}

{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <h1 class="page-header">Clusters</h1>
        
        <!-- Error div? -->

        <div>
            <button id="new-cluster-btn" type="button" class="btn btn-green" onclick="createClusterDialog()" title="Create New Cluster"> 
            <!-- NOTE: I've removed the 'disable if openstack'. Saw no reason to wait for existing clusters to load -->
                <span class="glyphicon glyphicon-plus" style="font-size:15px; margin-right:5px;"></span>New Cluster
            </button>
        
            <span id="loading-clusters">
                Loading Clusters: <div class="loader"></div>
            </span>
        </div>

        <div class="tab-content">
            <div class="tab-pane active">
                <!-- <p id="cluster-waiting-message">Retrieving cluster data...</p> -->
                <table id="cluster-list" class="table" cellspacing="0" width="100%"></table>
            </div>
        </div>
    </div>
</div>

{% include "clusters/create-modal.html" %}

<!-- <div>
    <p>Context:</p>
    <ul>
        <li>wshostname: {{wshostname}}</li>
        <li>wsport: {{wsport}}</li>
        <li>email: {{email}}</li>
        <li>cloudPlatform: {{cloudPlatform}}</li>
        <li>countLimit: {{countLimit}}</li>
    </ul>
</div>
<div>
    <p id="cluster-list">ha</p>
    <table id="cluster-list" class="table">
    </table>
</div>
<div>
    <table id="cluster-table"></table>
</div> -->
{% endblock %}